<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CVHS Engineering Hub â€“ Crescent Valley High School</title>
  <meta name="description" content="Equipment inventory, safety resources, training materials, and maintenance records for the CVHS Engineering and CTE Program.">
  <link rel="stylesheet" href="css/styles.css?v=3">
</head>
<body class="home">

  <!-- NAV -->
  <div id="nav-container"></div>

  <!-- PAGE HEADER -->
  <header class="page-header">
    <h1>Engineering Hub</h1>
    <p class="subtitle">Equipment, training, and maintenance for the CVHS CTE Program.</p>

    <!-- SEARCH BAR -->
    <div class="home-search" id="home-search">
      <span class="search-icon">
        <svg width="16" height="16" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><circle cx="8.5" cy="8.5" r="6"/><line x1="13" y1="13" x2="18" y2="18"/></svg>
      </span>
      <input type="text" placeholder="Search equipment, tools, software..." aria-label="Search">
      <div class="home-search-results" id="home-search-results"></div>
    </div>
  </header>

  <!-- CATEGORY ICON GRID -->
  <nav class="category-icon-row" aria-label="Equipment categories">
    <a class="category-icon-item" href="wood-power-tools/index.html">
      <span class="icon">ğŸªš</span>
      <span class="label">Power Tools</span>
    </a>
    <a class="category-icon-item" href="wood-hand-tools/index.html">
      <span class="icon">ğŸ”¨</span>
      <span class="label">Hand Tools</span>
    </a>
    <a class="category-icon-item" href="cnc/index.html">
      <span class="icon">ğŸ–¥ï¸</span>
      <span class="label">CNC & Digital</span>
    </a>
    <a class="category-icon-item" href="software/index.html">
      <span class="icon">ğŸ’»</span>
      <span class="label">Software</span>
    </a>
    <a class="category-icon-item" href="pneumatic/index.html">
      <span class="icon">ğŸ’¨</span>
      <span class="label">Pneumatics</span>
    </a>
    <a class="category-icon-item" href="maintenance/index.html">
      <span class="icon">ğŸ”§</span>
      <span class="label">Maintenance</span>
    </a>
    <a class="category-icon-item" href="autos/index.html">
      <span class="icon">ğŸš—</span>
      <span class="label">Automotive</span>
    </a>
    <a class="category-icon-item" href="metals/index.html">
      <span class="icon">âš™ï¸</span>
      <span class="label">Metals</span>
    </a>
    <a class="category-icon-item" href="welding/index.html">
      <span class="icon">ğŸ”¥</span>
      <span class="label">Welding</span>
    </a>
  </nav>

  <!-- STATS -->
  <div class="hub-stats" id="hub-stats"></div>

  <!-- SHOP SPOTLIGHT -->
  <section class="shop-spotlight">
    <h2>From the Shop</h2>
    <div id="shop-spotlight"></div>
  </section>

  <!-- GETTING STARTED -->
  <section class="getting-started">
    <h2>Getting Started</h2>
    <p>Review the general safety guidelines before using any shop equipment.</p>
    <a class="btn" href="https://drive.google.com/file/d/0BwwtL3lExl5wLWxUYld3U1BnUU0/view?usp=sharing" target="_blank" rel="noopener">
      <svg width="16" height="16" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2z"/><line x1="8" y1="8" x2="12" y2="8"/><line x1="8" y1="12" x2="12" y2="12"/></svg>
      General Safety Guidelines
    </a>
  </section>

  <!-- FOOTER -->
  <footer class="site-footer">
    <p>Crescent Valley High School Â· Engineering / CTE Program</p>
    <p>Maintained by CVHS Engineering faculty.</p>
  </footer>

  <script src="js/nav-data.js"></script>
  <script src="js/nav.js"></script>
  <script src="js/search.js"></script>
  <script src="js/shop-photos.js?v=3"></script>

  <!-- Hub stats + home search -->
  <script>
  (function() {
    /* Compute stats from NAV_DATA */
    if (window.NAV_DATA) {
      var categories = 0, equipment = 0;
      NAV_DATA.forEach(function(cat) {
        if (cat.slug === 'index') return;
        categories++;
        equipment += (cat.children ? cat.children.length : 0);
      });

      var statsEl = document.getElementById('hub-stats');
      if (statsEl) {
        statsEl.innerHTML =
          '<div class="hub-stat"><div class="stat-num">' + categories + '</div><div class="stat-label">Categories</div></div>' +
          '<div class="hub-stat"><div class="stat-num">' + equipment + '</div><div class="stat-label">Equipment Pages</div></div>' +
          '<div class="hub-stat"><div class="stat-num">196</div><div class="stat-label">Inventory Items</div></div>';
      }
    }

    /* Home search */
    var input = document.querySelector('#home-search input');
    var results = document.getElementById('home-search-results');
    if (!input || !results) return;

    var timer;
    input.addEventListener('input', function() {
      clearTimeout(timer);
      timer = setTimeout(function() { search(input.value.trim()); }, 120);
    });

    input.addEventListener('focus', function() {
      if (input.value.trim().length >= 2) search(input.value.trim());
    });

    document.addEventListener('click', function(e) {
      if (!e.target.closest('#home-search')) results.classList.remove('visible');
    });

    function search(q) {
      if (!q || q.length < 2) { results.classList.remove('visible'); results.innerHTML = ''; return; }

      var items = [];
      if (window.NAV_DATA) {
        NAV_DATA.forEach(function(cat) {
          if (cat.slug === 'index') return;
          if (cat.name.toLowerCase().indexOf(q.toLowerCase()) !== -1) {
            items.push({ name: cat.name, cat: '', href: cat.href.replace(/^\//, '') });
          }
          if (cat.children) cat.children.forEach(function(c) {
            if ((c.name + ' ' + cat.name).toLowerCase().indexOf(q.toLowerCase()) !== -1) {
              items.push({ name: c.name, cat: cat.name, href: cat.folder + '/' + c.slug + '.html' });
            }
          });
        });
      }

      if (!items.length) {
        results.innerHTML = '<div style="padding:20px;text-align:center;color:var(--ink-4);font-size:.88rem;">No results for "' + q + '"</div>';
        results.classList.add('visible');
        return;
      }

      var html = '';
      items.slice(0, 12).forEach(function(it) {
        html += '<a class="search-result-item" href="' + it.href + '">';
        html += '<span class="result-name">' + it.name + '</span>';
        if (it.cat) html += '<span class="result-category">' + it.cat + '</span>';
        html += '</a>';
      });
      results.innerHTML = html;
      results.classList.add('visible');
    }
  })();
  </script>
</body>
</html>
